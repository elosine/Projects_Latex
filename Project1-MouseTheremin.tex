%----------------------------------------------------------------------------------------
% FROM REFMAN - HUBERT PARTEL
\documentclass[twoside,a4paper]{refart}
\usepackage{makeidx}
\usepackage{ifthen}
\def\bs{\char'134 } % backslash in \tt font.
\newcommand{\ie}{i.\,e.,}
\newcommand{\eg}{e.\,g..}
\DeclareRobustCommand\cs[1]{\texttt{\char`\\#1}}
%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------
% FROM 
\usepackage[usenames,dvipsnames]{xcolor} % Required for specifying custom colors and referring to colors by name
\usepackage[framed]{sclang-prettifier}
%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------
% FROM 
\usepackage{adjustbox}
\usepackage{fontspec}
\newfontfamily{\sumfont}[Scale=0.85]{Gill Sans}
\usepackage[final]{showexpl}
\usepackage[T1]{fontenc}

\IfFileExists{luximono.sty}%
{%
  \usepackage[scaled]{luximono}%
}
{%
  \IfFileExists{beramono.sty}%
  {%
    \usepackage[scaled]{beramono}%
  }{}
}

\lstset{%
    basicstyle=\ttfamily\small,
    commentstyle=\itshape\ttfamily\small,
    showspaces=false,
    showstringspaces=false,
    breaklines=true,
    backgroundcolor=\color{lightgray},
    breakautoindent=true,
    captionpos=t
}

\iftrue
\lstset{explpreset={numbers=left,numberstyle=\tiny,numbersep=.3em,
  xleftmargin=1em,columns=flexible,language={}}}
\fi

\usepackage[font=small,labelfont=bf,justification=raggedright,%
  singlelinecheck=false]{caption}
\usepackage{amsmath}
\AtBeginDocument{%
  \renewcommand*\lstlistlistingname{Examples}
  \renewcommand*\lstlistingname{Example}
}

\newcommand*{\MARKER}%
  {\noindent\strut\vrule
   \hrulefill~half text area~\hrulefill\vrule
   \hrulefill~half text area~\hrulefill\vrule
    \marginpar{\strut\vrule\hrulefill~margin area~\hrulefill\vrule}}
    


\definecolor{DarkGreen}{rgb}{0.0,0.4,0.0} % Comment color
\definecolor{highlight}{RGB}{255,251,204} % Code highlight color
\definecolor{springgreen}{RGB}{0,255,127}
\definecolor{mint}{RGB}{189,252,201}
\definecolor{dodgerblue}{RGB}{30,144,255}
\definecolor{nicegreen}{RGB}{138,216,20}
\definecolor{pine}{RGB}{64,129,64}
\definecolor{papaya}{RGB}{255,164,142}
\definecolor{beet}{RGB}{157,84,156}
\definecolor{slate}{RGB}{117,119,123}
\definecolor{fig}{RGB}{128,84,98}
\definecolor{sunshine}{RGB}{255,234,100}
\definecolor{goldenrod}{RGB}{218,165,32}
\definecolor{darkorange}{RGB}{238,118,0}
\definecolor{violetred}{RGB}{208,32,144}

\def\changemargin#1#2{\list{}{\rightmargin#2\leftmargin#1}\item[]}
\let\endchangemargin=\endlist

\usepackage[bookmarks=true,pdfborder={0 0 0}, linkcolor=red, urlcolor = green]{hyperref}


%----------------------------------------------------------------------------------------
\lstnewenvironment{sumup}[1][]
{
	\vspace{-\baselineskip}
    \lstset{style=sumstyle}
}
{
    \vspace{-\baselineskip}
}
%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------
% STYLES

%----------------------------------------------------------------------------------------
\lstdefinestyle{sumstyle1}{ % Define a style for your code snippet, multiple definitions can be made if, for example, you wish to insert multiple code snippets using different programming languages into one document
%language=Java, % Detects keywords, comments, strings, functions, etc for the language specified
backgroundcolor=\color{mint}, % Set the background color for the snippet - useful for highlighting
basicstyle=\sumfont, % The default font size and style of the code
breakatwhitespace=false, % If true, only allows line breaks at white space
breaklines=true, % Automatic line breaking (prevents code from protruding outside the box)
captionpos=b, % Sets the caption position: b for bottom; t for top
commentstyle=\usefont{T1}{pcr}{m}{sl}\color{DarkGreen}, % Style of comments within the code - dark green courier font
deletekeywords={}, % If you want to delete any keywords from the current language separate them by commas
%escapeinside={\%}, % This allows you to escape to LaTeX using the character in the bracket
firstnumber=1, % Line numbers begin at line 1
frame=single, % Frame around the code box, value can be: none, leftline, topline, bottomline, lines, single, shadowbox
frameround=tttt, % Rounds the corners of the frame for the top left, top right, bottom left and bottom right positions
keywordstyle=\color{Blue}\bf, % Functions are bold and blue
morekeywords={}, % Add any functions no included by default here separated by commas
numbers=left, % Location of line numbers, can take the values of: none, left, right
numbersep=10pt, % Distance of line numbers from the code box
numberstyle=\tiny\color{Gray}, % Style used for line numbers
rulecolor=\color{black}, % Frame border color
showstringspaces=false, % Don't put marks in string spaces
showtabs=false, % Display tabs in the code as lines
stepnumber=100, % The step distance between line numbers, i.e. how often will lines be numbered
stringstyle=\color{Purple}, % Strings are purple
tabsize=2, % Number of spaces per tab in the code
framesep=10pt,
escapeinside={@}{@},
linewidth=13.8cm,
}
%----------------------------------------------------------------------------------------

%----------------------------------------------------------------------------------------
\lstdefinestyle{sumstyle2}{ % Define a style for your code snippet, multiple definitions can be made if, for example, you wish to insert multiple code snippets using different programming languages into one document
%language=Java, % Detects keywords, comments, strings, functions, etc for the language specified
backgroundcolor=\color{sunshine}, % Set the background color for the snippet - useful for highlighting
basicstyle=\sumfont, % The default font size and style of the code
breakatwhitespace=false, % If true, only allows line breaks at white space
breaklines=true, % Automatic line breaking (prevents code from protruding outside the box)
captionpos=b, % Sets the caption position: b for bottom; t for top
commentstyle=\usefont{T1}{pcr}{m}{sl}\color{DarkGreen}, % Style of comments within the code - dark green courier font
deletekeywords={}, % If you want to delete any keywords from the current language separate them by commas
%escapeinside={\%}, % This allows you to escape to LaTeX using the character in the bracket
firstnumber=1, % Line numbers begin at line 1
frame=single, % Frame around the code box, value can be: none, leftline, topline, bottomline, lines, single, shadowbox
frameround=tttt, % Rounds the corners of the frame for the top left, top right, bottom left and bottom right positions
keywordstyle=\color{Blue}\bf, % Functions are bold and blue
morekeywords={}, % Add any functions no included by default here separated by commas
numbers=left, % Location of line numbers, can take the values of: none, left, right
numbersep=10pt, % Distance of line numbers from the code box
numberstyle=\tiny\color{Gray}, % Style used for line numbers
rulecolor=\color{black}, % Frame border color
showstringspaces=false, % Don't put marks in string spaces
showtabs=false, % Display tabs in the code as lines
stepnumber=100, % The step distance between line numbers, i.e. how often will lines be numbered
stringstyle=\color{Purple}, % Strings are purple
tabsize=2, % Number of spaces per tab in the code
framesep=10pt,
escapeinside={@}{@},
linewidth=10.5cm,
}
%----------------------------------------------------------------------------------------

%----------------------------------------------------------------------------------------
\lstdefinestyle{sectit}{ % Define a style for your code snippet, multiple definitions can be made if, for example, you wish to insert multiple code snippets using different programming languages into one document
language=Java, % Detects keywords, comments, strings, functions, etc for the language specified
backgroundcolor=\color{white}, % Set the background color for the snippet - useful for highlighting
basicstyle=\Huge\sumfont, % The default font size and style of the code
breakatwhitespace=false, % If true, only allows line breaks at white space
breaklines=true, % Automatic line breaking (prevents code from protruding outside the box)
captionpos=b, % Sets the caption position: b for bottom; t for top
commentstyle=\usefont{T1}{pcr}{m}{sl}\color{DarkGreen}, % Style of comments within the code - dark green courier font
deletekeywords={}, % If you want to delete any keywords from the current language separate them by commas
%escapeinside={\%}, % This allows you to escape to LaTeX using the character in the bracket
firstnumber=1, % Line numbers begin at line 1
frame=none, % Frame around the code box, value can be: none, leftline, topline, bottomline, lines, single, shadowbox
keywordstyle=\color{Blue}\bf, % Functions are bold and blue
morekeywords={}, % Add any functions no included by default here separated by commas
numbers=left, % Location of line numbers, can take the values of: none, left, right
numbersep=10pt, % Distance of line numbers from the code box
numberstyle=\tiny\color{Gray}, % Style used for line numbers
rulecolor=\color{black}, % Frame border color
showstringspaces=false, % Don't put marks in string spaces
showtabs=false, % Display tabs in the code as lines
stepnumber=100, % The step distance between line numbers, i.e. how often will lines be numbered
stringstyle=\color{Purple}, % Strings are purple
tabsize=2, % Number of spaces per tab in the code
frame=tb,
framesep=5pt,
escapeinside={@}{@},
}
%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------
\lstdefinestyle{Processing}{ % Define a style for your code snippet, multiple definitions can be made if, for example, you wish to insert multiple code snippets using different programming languages into one document
language=Java, % Detects keywords, comments, strings, functions, etc for the language specified
backgroundcolor=\color{highlight}, % Set the background color for the snippet - useful for highlighting
basicstyle=\footnotesize\ttfamily, % The default font size and style of the code
breakatwhitespace=false, % If true, only allows line breaks at white space
breaklines=true, % Automatic line breaking (prevents code from protruding outside the box)
captionpos=b, % Sets the caption position: b for bottom; t for top
commentstyle=\usefont{T1}{pcr}{m}{sl}\color{DarkGreen}, % Style of comments within the code - dark green courier font
deletekeywords={}, % If you want to delete any keywords from the current language separate them by commas
%escapeinside={\%}, % This allows you to escape to LaTeX using the character in the bracket
firstnumber=1, % Line numbers begin at line 1
frame=single, % Frame around the code box, value can be: none, leftline, topline, bottomline, lines, single, shadowbox
frameround=tttt, % Rounds the corners of the frame for the top left, top right, bottom left and bottom right positions
keywordstyle=\color{Blue}\bf, % Functions are bold and blue
morekeywords={setup,draw,stroke,line,size,smooth}, % Add any functions no included by default here separated by commas
numbers=left, % Location of line numbers, can take the values of: none, left, right
numbersep=10pt, % Distance of line numbers from the code box
numberstyle=\tiny\color{Gray}, % Style used for line numbers
rulecolor=\color{black}, % Frame border color
showstringspaces=false, % Don't put marks in string spaces
showtabs=false, % Display tabs in the code as lines
stepnumber=5, % The step distance between line numbers, i.e. how often will lines be numbered
stringstyle=\color{Purple}, % Strings are purple
tabsize=2, % Number of spaces per tab in the code
}
%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------
% Create a command to cleanly insert a snippet with the style above anywhere in the document
\newcommand{\insertcode}[2]{
\begin{itemize}\item[]\lstinputlisting[caption=#2,label=#1,style=Style1]{#1}
\end{itemize}
} % The first argument is the script location/filename and the second is a caption for the listing


%----------------------------------------------------------------------------------------


\title{Creativity Through Interaction: 10 projects using open-source software}
\author{Justin Yang \\
2014-09-04   \\
}
\date{}
\emergencystretch1em  %
\pagestyle{myfootings}
\markboth{Creativity Through Digital Design and Interaction: 10 projects using open-source software}
         {Creativity Through Digital Design and Interaction: 10 projects using open-source software}
\makeindex 
\setcounter{tocdepth}{2}
\settextfraction{0.80}
\begin{document}
\maketitle
%\begin{abstract}  
%\end{abstract}
%10 projects for the digital artist.
\tableofcontents
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%----------------------------------------------------------------------------------------
\begin{changemargin}{-3.5cm}{0cm} 
\begin{lstlisting}[style=sectit]
@\textcolor{violetred}{
PROJECT 1 - MOUSE THEREMIN
}@
\end{lstlisting}
\end{changemargin}
\section{PROJECT1 - MOUSE THEREMIN}
%----------------------------------------------------------------------------------------
\begin{changemargin}{-1.5cm}{0.0cm} 
\begin{lstlisting}[style=sumstyle1]
With a few lines of code, we build a pretty useful and infinitely expandable
digital instrument. All of the ingredients for digital performance are here,
instrument, interface and score.  It'll introduce us to basics concepts in
coding, synthesis, SuperCollider, Processing, and give us a basic template
where the sky's the limit.
\end{lstlisting} 
\end{changemargin}
%----------------------------------------------------------------------------------------
\subsection{Start At The End}
\begin{changemargin}{1.8cm}{0.0cm} 
\begin{lstlisting}[style=sumstyle2]
@\begin{large}
EXPLORING IN THIS SECTION
\end{large}@
--> Following Instructions
--> Wrist & Finger Dexterity
--> Mouse Accuracy & Speed
--> Digital Performance
\end{lstlisting} 
\end{changemargin}
%----------------------------------------------------------------------------------------
\index{mousetheremin_sc}\marginlabel{Run the Code:}
Copy the SC code below into SuperCollider, or you can download it from here:

\textcolor{blue}{\url{https://github.com/elosine/Mouse_Theremin/archive/master.zip}}

\begin{enumerate}
	\item
Run it as indicated.  
	\item
See if you can figure out what to do without any further guidance.
	\item
Did you play a tune?
Which one?
My favourite is the Godfather theme.

\end{enumerate}
\begin{changemargin}{-1.5cm}{0.0cm} 
\lstinputlisting[style=SuperCollider-IDE,backgroundcolor=\color{highlight},linewidth=13.8cm]{"Code/1a_Mouse_Theremin.scd"}
\end{changemargin}
%----------------------------------------------------------------------------------------
\subsection{Make A Simple Score}
\begin{changemargin}{1.8cm}{0.0cm} 
\begin{lstlisting}[style=sumstyle2]
@\begin{large}
EXPLORING IN THIS SECTION
\end{large}@
--> Basic Drawing w/Processing
--> Using SuperCollider Lang as a Calculating Environment
\end{lstlisting} 
\end{changemargin}
Let's make a simple graphic score that will help us play the riff from Coolio/Stevie Wonder's 'Gangster's Paradise'.  Copy the following code into Processing or download from here (use 'Coolio1):

\textcolor{blue}{\url{https://github.com/elosine/coolio/archive/master.zip}}

\begin{changemargin}{-1.5cm}{0.0cm} 
\lstinputlisting[style=Processing,backgroundcolor=\color{highlight},linewidth=13.8cm]{"Code/Coolio1/Coolio1.pde"}
\end{changemargin}

If you select 'Run' from the Sketch menu in the Processing IDE, or press CMD-R your screen should fill with a grey canvas with lines running through.  Now if you point to the lines with the mouse, you might be playing the pitches from 'Gangster's Paradise'.  However, you may have a different screen resolution so let's take this opportunity to learn some Processing basics and make a score fit to your screen.  

First, adjust the size parameters in your code to the resolution of your screen.  Simply change the arguments in the size function to the width and height of your screen.  CMD-R to run again and you should have a canvas the size of your screen:

\begin{changemargin}{-1.5cm}{0.0cm} 
	\begin{lstlisting}[style=Processing, caption={Change Canvas Size}]
	void setup(){
	  size(1920, 1080);
	  smooth();
	}
	\end{lstlisting}
\end{changemargin}

Now, we may have to adjust the location of the lines on your score.  I've written a couple of utilities to help with this.  We don't need to worry about how they work right now, though I find it is always helpful to try to figure mysterious code out.  Go back to your SC code and find the bit of code that looks like this:

\begin{changemargin}{-1.5cm}{0.0cm} 
	\begin{lstlisting}[style=SuperCollider-IDE, backgroundcolor=\color{highlight},linewidth=13.8cm]
//EXAMPLE OF MIDI NOTE TO Y COORDINATE TO LOOK UP VALUES FOR YOUR PROCESSING PATCH:
////Use only these symbols:
//// \c, \cs, \d, \eb, \e, \f, \fs, \g, \gs, \a, \bb, \b
	~midiToY.value(\g5);
	~midiToY.value(\fs4);
//Look @ Post Window
	\end{lstlisting}
\end{changemargin}

We are actually just interested in the function: ~midiToY.value(\g5).  At the bottom of the SC code you'll find the notes to our riff: c6, b5, g5.  Now just fill these notes into the function, place your cursor on the line, and press CMD-RETURN, and look at your post window and you should get a number, these will be the y coordinates that correspond to the pitches for your mouse theremin.

\begin{changemargin}{-1.5cm}{0.0cm} 
	\begin{lstlisting}[style=SuperCollider-IDE, backgroundcolor=\color{highlight},linewidth=13.8cm]
	~midiToY.value(\c6);
	~midiToY.value(\b5);
	~midiToY.value(\g5);
	\end{lstlisting}
\end{changemargin}

Once you get the proper coordinates, go back to your Processing code and fill in the coordinates.  Where it says 298, fill in the number you got for c6, b5 goes in 310, and g5 replaces 360:

\begin{changemargin}{-1.5cm}{0.0cm} 
	\begin{lstlisting}[style=Processing]
	line(0, 298+topmargincompinsation , width, 298+topmargincompinsation);
	line(0, 310+topmargincompinsation , width, 310+topmargincompinsation);
	line(0, 360+topmargincompinsation , width, 360+topmargincompinsation);
	\end{lstlisting}
\end{changemargin}

Looking at the Processing code, do you think you could create a score for your own tune?  Give it a try and then play it.

%----------------------------------------------------------------------------------------
NEXT:
REFERENCES/TUTORIALS
LOOK UNDER THE HOOD
READINGS
FURTHER STUDY





%----------------------------------------------------------------------------------------

\printindex

\end{document}
